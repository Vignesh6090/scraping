import scrapy
from scrapy.loader import ItemLoader
import sys
sys.path.append('/home/alim/virtual_workspace/demo_project/demo_project')
from ..items import QuoteItem


class GoodReadsSpider(scrapy.Spider):
    #identity
    #name="goodreads"

    start_urls= [
        'https://www.goodreads.com/quotes?page=1'
    ]

    #Response
    def parse(self, response):
        for quote in response.xpath("//div[@class='quote']"):
            loader= ItemLoader(item=QuoteItem(), selector=quote, response=response)
            loader.add_xpath('text', ".//div[@class='quoteText']/text()[1]")
            loader.add_xpath('author', ".//div[@class='quoteText']/child::span/text()[1]")
            loader.add_xpath('tags', ".//div[@class='greyText smallText left']/a/text()")
            yield loader.load_item()
            
    
        next_page = response.css("a.next_page::attr(href)").get()

        if next_page is not None:
            yield response.follow(next_page, self.parse)


import scrapy
from scrapy.http import FormRequest
from selenium import webdriver
from selenium.webdriver.chrome.options import Options

'''
options = Options()
options.add_argument('--disable-dev-shm-usage')
options.add_argument('--no-sandbox')
options.add_argument('--disable-extensions')
options.add_argument('--disable-gpu')
options.add_argument('disable-infobars')
options.add_argument('start-maximized')

driver = webdriver.Chrome(executable_path="/home/alim/Downloads/chromedriver", chrome_options=options)

driver.get("https://github.com/alimrasheed")

    #assert "quotes" in driver.title

username = driver.find_element_by_xpath("//input[@id='login_field']")
username.clear()
username.send_keys("m97alim@gmail.com")

password = driver.find_element_by_xpath("//input[@id='password']")
password.clear()
password.send_keys("alim8506")


driver.find_element_by_xpath("//input[@type='submit']").click()

class Craigslist(scrapy.Spider):
    name = 'craigs'

    start_urls = ['https://github.com/alimrasheed']
    def parse(self, response):
        username = driver.find_element_by_xpath("//input[@id='login_field']")
        username.clear()
        username.send_keys("m97alim@gmail.com")

        password = driver.find_element_by_xpath("//input[@id='password']")
        password.clear()
        password.send_keys("alim8506")

        response.follow('https://github.com/alimrasheed')

        driver.find_element_by_xpath("//input[@type='submit']").click()

        yield{
            'email': response.xpath("//span[@title='Indian-License-plate-detection']/text()")
        }
'''            